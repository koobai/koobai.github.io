<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>Hugo主题添加暗黑(夜间)模式, 并自动切换 - 空白生活</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=https://img.koobai.com/koobai.png><link href=/index.xml title=空白生活 type=application/rss+xml><link rel=canonical href=https://koobai.com/hugo_dark/><link rel=stylesheet href=/css/style.min.6ba13df8a9a5f433623dcde75f5826b9876e02eb5dedb32bc88236ebb5f5a9ba.css><meta name=description content="继续完善博客主题风格，折腾过程，备份记录留档。由于自己并不懂技术，折腾博客过程中，想实现或者解决某一想法或问题时，都需要通过搜索引擎查阅大量的资料，花大把时间，最终才能勉强得以解决或者继续无解。这就是折腾过程中的乐趣，特别是实现或解决成功的那个兴奋欣慰感～～"><meta property="og:title" content="Hugo主题添加暗黑(夜间)模式, 并自动切换"><meta property="og:type" content="website"><meta property="og:url" content="https://koobai.com/hugo_dark/"><meta property="og:image" content="https://img.koobai.com/article/dark.svg"><meta property="og:description" content="继续完善博客主题风格，折腾过程，备份记录留档。由于自己并不懂技术，折腾博客过程中，想实现或者解决某一想法或问题时，都需要通过搜索引擎查阅大量的资料，花大把时间，最终才能勉强得以解决或者继续无解。这就是折腾过程中的乐趣，特别是实现或解决成功的那个兴奋欣慰感～～"></head><body class='page page-blog-single'><div id=menu-main-mobile class=menu-main-mobile><ul class=menu><li><a href=https://koobai.com/>首页</a></li><li><a href=https://workouts.koobai.com>锻炼</a></li><li><a href=https://koobai.com/memos/>唠叨</a></li><li><a href=https://koobai.com/apps/>软件</a></li><li><a href=https://koobai.com/hardware/>好物</a></li><li><a href=https://koobai.com/movies/>观影</a></li><li><a href=https://koobai.com/posts/>博文</a></li><li><a href=https://koobai.com/about/>关于</a></li></ul></div><div id=wrapper class=wrapper><div class=header-background><div class=header><a href=/ class=header-logo><img class=memoImage alt=koobai></a>
<script src=/js/memos_avatar.js></script>
<a href=/ class=header-title>空白生活</a><div class=menu-main><div class=header-menu><a href=/>首页</a></div><div class=header-menu><a href=https://workouts.koobai.com>锻炼</a></div><div class=header-menu><a href=/memos/>唠叨</a></div><div class=header-menu><a href=/apps/>软件</a></div><div class=header-menu><a href=/hardware/>好物</a></div><div class=header-menu><a href=/movies/>观影</a></div><div class=header-menu><a href=/posts/>博文</a></div><div class=header-menu><a href=/about/>关于</a></div><a href=/index.xml target=_blank><img class=header-rss src=https://img.koobai.com/rss.svg alt=RSS></a><a href=mailto:mekoobai@gmail.com><img class=header-rss src=https://img.koobai.com/email.svg alt=E-mail></a></div><div id=toggle-menu-main-mobile class=hamburger-trigger><button class=hamburger>Menu</button></div></div></div><script src=https://fastly.jsdelivr.net/gh/Tokinx/ViewImage/view-image.min.js></script><div class=blog><div class=intro><h1 class=article_title>Hugo主题添加暗黑(夜间)模式, 并自动切换</h1><img src=https://img.koobai.com/article/dark.svg class=top-img></div><div class=content_zhengwen><div class=content><p>继续完善博客主题风格，折腾过程，备份记录留档。由于自己已习惯把终端设备外观设置成自动切换浅色或深色模式，为了夜间浏览体验，博客应该支持暗黑(夜间)模式。</p><p>以 hugo 关键词搜索主题应该怎么适配，相关资料很少，尝试到绝望之际，换成了英文关键词，最终 Atanas Yonkov 的"<a href=https://yonkov.github.io/post/add-dark-mode-toggle-to-hugo/ target=_blank>Adding Dark Mode to Hugo</a>&ldquo;拯救了自己，根据其教程，添加成功。虽不完美，但已实现，纠结两个问题：</p><ol><li>暗黑模式下，点击链接加载都会白一下再变暗。</li><li>不会根据终端设备模式自动切换，需要手动点击。</li></ol><p>尝试搜索解决，无果。之后发现 WorkPlusFE&rsquo;s Blog 的&rdquo;<a href=https://fe-blog.workplus.io/dark-mode-guide-on-web target=_blank>Dark Mode</a>&ldquo;教程，又是一番折腾，最终完美解决。最简单直接方式：在 hugo 样式文件中（如：style.scss）添加</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>@</span><span class=k>media</span> <span class=o>(</span><span class=nt>prefers-color-scheme</span><span class=o>:</span> <span class=nt>dark</span><span class=o>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=c>/* 暗黑模式下css样式, 如: */</span>
</span></span><span class=line><span class=cl>  <span class=nt>body</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>background</span><span class=p>:</span> <span class=mh>#1A1718</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>完善暗黑模式下的样式属性之后，终端设备在深色模式下会自动调用渲染主题暗黑模式下的样式表，反之浅色模式下就调用默认样式。</p><h3 id=扩展>扩展</h3><p>当然如果要做好暗黑模式，并不是简单的反黑白，需要不断尝试样式的各个配色方案，以寻求夜间浏览的实际体验。不过图片可以采用降低透明度的方式来缓解夜间过亮刺眼的问题：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>@</span><span class=k>media</span> <span class=o>(</span><span class=nt>prefers-color-scheme</span><span class=o>:</span> <span class=nt>dark</span><span class=o>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>img</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>filter</span><span class=p>:</span> <span class=nb>brightness</span><span class=p>(</span><span class=mf>0.8</span><span class=p>)</span> <span class=nb>contrast</span><span class=p>(</span><span class=mf>1.2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=感悟>感悟</h3><p>由于自己并不懂技术，折腾博客过程中，想实现或者解决某一想法或问题时，都需要通过搜索引擎查阅大量的资料，花大把时间，最终才能勉强得以解决或者继续无解。这就是折腾过程中的乐趣，特别是实现或解决成功的那个兴奋欣慰感～～</p></div><div class=page-time>2023-01-19</div><div class=tag><a href=/tags/%E5%8D%9A%E5%AE%A2/>博客</a></div><div class=tag><a href=/tags/%E6%8A%98%E8%85%BE/>折腾</a></div><div class=tag><a href=/tags/hugo/>Hugo</a></div></div><div class=archives_nrong><div class=archives_one><div><div class=archive-title><a href=/hugo_action_tencentcos/>Github自动构建Hugo, 并同步到腾讯COS, 同时刷新CDN缓存</a></div><div class=archive-time>2023-01-15</div></div><div class=archive-img><a href=/hugo_action_tencentcos/><img loading=lazy decoding=async src=https://img.koobai.com/article/cdn.svg></a></div></div><div class=archives_one><div><div class=archive-title><a href=/hugo_responsive_font/>Hugo主题实现自适应布局, 及自定义字体</a></div><div class=archive-time>2023-01-28</div></div><div class=archive-img><a href=/hugo_responsive_font/><img loading=lazy decoding=async src=https://img.koobai.com/article/responsive.svg></a></div></div></div><div class=article-comments><link href=https://npm.elemecdn.com/artalk@2.5.5/dist/ArtalkLite.css rel=stylesheet><script src=https://npm.elemecdn.com/artalk@2.5.5/dist/ArtalkLite.js></script><div id=Comments></div><script>new Artalk({el:"#Comments",pageKey:"https://koobai.com/hugo_dark/",pageTitle:"Hugo主题添加暗黑(夜间)模式, 并自动切换",server:"https://c.koobai.com",site:"Koobai 空白生活"})</script></div></div><div class=footer-background><div class=footer><div class=footer-info>&copy; 2023 <a href=/>空白生活</a>.
由
<a href=https://gohugo.io/ target=_blank>Hugo</a> 提供强力驱动,
主题<a href=https://github.com/koobai/blog target=_blank>惊蛰 v3.0 由 Koobai 折腾</a>.
<a href=https://beian.miit.gov.cn/ target=_blank>浙ICP备16011784号-1</a>
<img src=https://img.koobai.com/footer/beian.png alt=备案号> <a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33011302000343">浙公网安备 33011302000343 号</a></div></div><script async src=https://img.koobai.com/yangle.js data-website-id=dd7da057-fabf-4362-b9fb-4f547063bd87 data-host-url=https://u.koobai.com data-domains=koobai.com></script><div class=gotop_hide><div class=gotop onclick=smoothScrollTop() id=gotop><img src=https://img.koobai.com/up.svg alt=回到顶部></div></div><script>window.addEventListener("load",function(){document.body.classList.add("loaded")})</script><script type=text/javascript src=/js/bundle.min.40191c6a6135db00083fce007437e8f3edafc13a98ac097c9e8ea21f8b2780a5.js></script></body></html>