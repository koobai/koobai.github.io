<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>Githubè‡ªåŠ¨æ„å»ºHugo, å¹¶åŒæ­¥åˆ°è…¾è®¯COS, åŒæ—¶åˆ·æ–°CDNç¼“å­˜ - ç©ºç™½Koobai</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=https://img.koobai.com/koobai.png><link href=/index.xml title=ç©ºç™½Koobai type=application/rss+xml><link rel=canonical href=https://koobai.com/hugo_action_tencentcos/><link rel=stylesheet href=/css/style.min.122ec14b3f036e465e1ad4a6681e0b9bb03994243c34f183139e8b44b8d72d23.css><meta name=description content="æŠŠäºŒçº§åŸŸåæ”¹æˆä¸€çº§ï¼Œè¿‡ç¨‹ä¸­å‘ç°Cloudflare Pageså¦‚æœè¦ç»‘å®šä¸€çº§ï¼Œé¡»æŠŠåŸŸåçš„DNSæœåŠ¡å™¨è§£æè¿‡å»ã€‚è§£æä¹‹åï¼Œè‡ªå·±çš„nasè®¿é—®å˜å¾—ä¸ç¨³å®šï¼Œæ—¶ä¸æ—¶çš„æ‰“ä¸å¼€ï¼Œæ¥æ¥å›å›æŠ˜è…¾äº†å¥½å‡ æ¬¡ï¼Œæ— è§£ï¼Œåªå¥½æ”¹å›å»ã€‚ vercelå¯ä»¥ç»‘å®šä¸€çº§ï¼Œå°è¯•ä¹‹åï¼Œè®¿é—®é€Ÿåº¦å¤ªæ…¢ï¼Œæ”¾å¼ƒã€‚å¼€å§‹äº†è§£å›½å†…çš„äº‘æœåŠ¡ï¼Œå­¦ä¹ åˆ°äº†å¯¹è±¡å‚¨å­˜ã€CDNï¼Œç»è¿‡ä¸€ç•ªå¯¹æ¯”å°è¯•ï¼Œæœ€ç»ˆé€‰æ‹©è…¾è®¯äº‘çš„COSå¯¹è±¡å­˜å‚¨é…åˆå†…å®¹åˆ†å‘ç½‘ç»œCDNæ­å»ºã€‚ "><meta property="og:title" content="Githubè‡ªåŠ¨æ„å»ºHugo, å¹¶åŒæ­¥åˆ°è…¾è®¯COS, åŒæ—¶åˆ·æ–°CDNç¼“å­˜"><meta property="og:type" content="website"><meta property="og:url" content="https://koobai.com/hugo_action_tencentcos/"><meta property="og:image" content="https://img.koobai.com/article/cdn.svg"><meta property="og:description" content="æŠŠäºŒçº§åŸŸåæ”¹æˆä¸€çº§ï¼Œè¿‡ç¨‹ä¸­å‘ç°Cloudflare Pageså¦‚æœè¦ç»‘å®šä¸€çº§ï¼Œé¡»æŠŠåŸŸåçš„DNSæœåŠ¡å™¨è§£æè¿‡å»ã€‚è§£æä¹‹åï¼Œè‡ªå·±çš„nasè®¿é—®å˜å¾—ä¸ç¨³å®šï¼Œæ—¶ä¸æ—¶çš„æ‰“ä¸å¼€ï¼Œæ¥æ¥å›å›æŠ˜è…¾äº†å¥½å‡ æ¬¡ï¼Œæ— è§£ï¼Œåªå¥½æ”¹å›å»ã€‚ vercelå¯ä»¥ç»‘å®šä¸€çº§ï¼Œå°è¯•ä¹‹åï¼Œè®¿é—®é€Ÿåº¦å¤ªæ…¢ï¼Œæ”¾å¼ƒã€‚å¼€å§‹äº†è§£å›½å†…çš„äº‘æœåŠ¡ï¼Œå­¦ä¹ åˆ°äº†å¯¹è±¡å‚¨å­˜ã€CDNï¼Œç»è¿‡ä¸€ç•ªå¯¹æ¯”å°è¯•ï¼Œæœ€ç»ˆé€‰æ‹©è…¾è®¯äº‘çš„COSå¯¹è±¡å­˜å‚¨é…åˆå†…å®¹åˆ†å‘ç½‘ç»œCDNæ­å»ºã€‚ "></head><body class='page page-blog-single'><div id=menu-main-mobile class=menu-main-mobile><ul class=menu><li><a href=https://koobai.com/>é¦–é¡µ</a></li><li><a href=https://koobai.com/memos/>å” å¨</a></li><li><a href=https://koobai.com/apps/>è½¯ä»¶</a></li><li><a href=https://koobai.com/hardware/>å¥½ç‰©</a></li><li><a href=https://koobai.com/movies/>è§‚å½±</a></li><li><a href=https://koobai.com/posts/>åšæ–‡</a></li><li><a href=https://koobai.com/about/>å…³äº</a></li></ul></div><div id=wrapper class=wrapper><div class=header-background><div class=header><a href=/ class=header-logo><img src=https://img.koobai.com/photo/koobai.webp alt=koobai></a>
<a href=/ class=header-title>ç©ºç™½Koobai</a><div class=menu-main><div class=header-menu><a href=/>é¦–é¡µ</a></div><div class=header-menu><a href=/memos/>å” å¨</a></div><div class=header-menu><a href=/apps/>è½¯ä»¶</a></div><div class=header-menu><a href=/hardware/>å¥½ç‰©</a></div><div class=header-menu><a href=/movies/>è§‚å½±</a></div><div class=header-menu><a href=/posts/>åšæ–‡</a></div><div class=header-menu><a href=/about/>å…³äº</a></div><a href=/index.xml target=_blank data-umami-event=Rss><img class=header-rss src=https://img.koobai.com/rss.svg alt=RSS></a><a href=mailto:mekoobai@gmail.com><img class=header-rss src=https://img.koobai.com/email.svg alt=E-mail></a></div><div id=toggle-menu-main-mobile class=hamburger-trigger><button class=hamburger>Menu</button></div></div></div><script src="/js/moment.min.js?v=2.29.4"></script>
<script src=/js/moment.twitter.min.js></script>
<script>function formatDate(e){return typeof e=="number"&&(e=new Date(e*1e3).toISOString()),moment(Date.parse(e)).twitterLong().replace(/\s\d{2}:\d{2}/,"")}</script><div class=blog><div class=intro><h1 class=article_title>Githubè‡ªåŠ¨æ„å»ºHugo, å¹¶åŒæ­¥åˆ°è…¾è®¯COS, åŒæ—¶åˆ·æ–°CDNç¼“å­˜</h1><img src=https://img.koobai.com/article/cdn.svg class="top-img img-hide"></div><div class=content_zhengwen><div class=content><p>åšå®¢é€æ­¥æ­å»ºå®Œå–„ï¼Œæ›´æ–°äº†æ—¥å¸¸ä½¿ç”¨çš„<a href=https://koobai.com/apps/>App</a>ã€<a href=https://koobai.com/hardware/>ç¡¬ä»¶</a>é¡µé¢ã€‚åšå®¢æ ·å¼æ ‡é¢˜é‡‡ç”¨äº†"<a href=https://github.com/atelier-anchor/smiley-sans target=_blank>å¾—æ„é»‘</a>&ldquo;å¼€æºå­—ä½“ã€‚æŠŠäºŒçº§åŸŸåæ”¹æˆä¸€çº§ï¼Œè¿‡ç¨‹ä¸­å‘ç° Cloudflare Pages å¦‚æœè¦ç»‘å®šä¸€çº§ï¼Œé¡»æŠŠåŸŸåçš„ DNS æœåŠ¡å™¨è§£æè¿‡å»ã€‚è§£æä¹‹åï¼Œè‡ªå·±çš„ nas è®¿é—®å˜å¾—ä¸ç¨³å®šï¼Œæ—¶ä¸æ—¶çš„æ‰“ä¸å¼€ï¼Œæ¥æ¥å›å›æŠ˜è…¾äº†å¥½å‡ æ¬¡ï¼Œæ— è§£ï¼Œåªå¥½æ”¹å›å»ã€‚ vercel å¯ä»¥ç»‘å®šä¸€çº§ï¼Œå°è¯•ä¹‹åï¼Œè®¿é—®é€Ÿåº¦å¤ªæ…¢ï¼Œæ”¾å¼ƒã€‚å¼€å§‹äº†è§£å›½å†…çš„äº‘æœåŠ¡ï¼Œå­¦ä¹ åˆ°äº†å¯¹è±¡å‚¨å­˜ã€CDNï¼Œç»è¿‡ä¸€ç•ªå¯¹æ¯”å°è¯•ï¼Œæœ€ç»ˆé€‰æ‹©è…¾è®¯äº‘çš„ COS å¯¹è±¡å­˜å‚¨é…åˆå†…å®¹åˆ†å‘ç½‘ç»œ CDN æ­å»º(ä¸»è¦å®ƒçš„ cosbrowser ç•Œé¢æ˜¯ç»è¿‡è®¾è®¡çš„ áµ”â—¡áµ”ï¼›å®¢æœä¹Ÿå¾ˆè´Ÿè´£ï¼Œå’¨è¯¢é—®é¢˜ä¼šç”µè¯æ‰“è¿‡æ¥è¯¦ç»†æ•™ä½ å¦‚ä½•æ“ä½œ)ã€‚</p><p>åœ¨äº†è§£éƒ¨ç½²è¿‡ç¨‹ä¸­å‘ç° Cyrus&rsquo;s Blog å†™çš„&rdquo;<a href=https://blog.xm.mk/posts/fc83 target=_blank>è‡ªåŠ¨æ„å»º Hugo åšå®¢éƒ¨ç½²è‡³è…¾è®¯äº‘å¯¹è±¡å­˜å‚¨ COS å¹¶åˆ·æ–° CDN</a>&ldquo;æ•™ç¨‹ï¼Œä¸€ç•ªæŠ˜è…¾ï¼Œå®Œç¾ã€‚æ„Ÿè°¢ä½œè€…ã€‚<br>å¤‡ä»½è®°å½•ä¸‹è¿‡ç¨‹: (è¯¦ç»†çš„æ³¨é‡Šå¯æŸ¥çœ‹ Cyrus&rsquo;s Blog)</p><h3 id=å‡†å¤‡å·¥ä½œ>å‡†å¤‡å·¥ä½œï¼š</h3><ol><li>åˆ°è…¾è®¯äº‘è®¿é—®ç®¡ç†â€”â€”è®¿é—®å¯†é’¥â€”â€”API å¯†é’¥ç®¡ç†ä¸­ï¼Œæ–°å»ºä¸€ä¸ªè´¦æˆ·ï¼šè®¿é—®æ–¹å¼æ”¹ä¸º"ç¼–ç¨‹è®¿é—®&rdquo;ï¼Œç”¨æˆ·æƒé™æ·»åŠ "QcloudCOSDataFullControlã€ QcloudCDNFullAccess"ã€‚å®Œæˆä¹‹åå°†ç”Ÿæˆçš„ SecretIdã€SecretKey å¤åˆ¶ä¿å­˜ã€‚</li><li>åˆ° Github æ–°å»ºä¸€ä¸ªä»“åº“(ç§æœ‰å…¬å…±éƒ½è¡Œ)ï¼ŒæŠŠè‡ªå·± hugo ç”Ÿæˆçš„ç«™ç‚¹æºæ–‡ä»¶(ä¸æ˜¯ public ä¸‹æ–‡ä»¶)åŒæ­¥è¿‡å»ã€‚</li><li>åœ¨åˆšåˆ›å»ºçš„ä»“åº“â€”â€”Settingsâ€”â€”Secrets and variablesâ€”â€”Actionsï¼Œæ–°å»º SecretIdã€SecretKeyã€Bucketã€ Region å››ä¸ªå¯†é’¥ã€‚å…¶ä¸­ SecretIdã€SecretKey ä¸ºä¸Šé¢å¤åˆ¶ä¿å­˜çš„ï¼ŒBucket(å­˜å‚¨æ¡¶åç§°)ã€ Region(æ‰€å±åœ°åŸŸ )åœ¨ COS ä¸­å­˜å‚¨æ¡¶åˆ—è¡¨ä¸­è·å–ã€‚</li></ol><h3 id=éƒ¨ç½²>éƒ¨ç½²:</h3><ol><li>åœ¨ Github ä»“åº“æ ¹ç›®å½•ï¼Œæ–°å»º".github/workflows"æ–‡ä»¶å¤¹ï¼Œå¹¶æ–°å»º xxx.yml æ–‡ä»¶ï¼Œå¤åˆ¶ä»¥ä¸‹ä»£ç åˆ°æ–‡ä»¶é‡Œã€‚ä½œç”¨ï¼šå€ŸåŠ© Github Action å®ç°è‡ªåŠ¨éƒ¨ç½²ã€‚</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build and deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># è‡ªåŠ¨è§¦å‘æ„å»º</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># æ„å»ºhugoåŠç”Ÿäº§é™æ€é¡µé¢</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>submodules</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>fetch-depth</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup Hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-hugo@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>hugo-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;latest&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>extended</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>hugo --minify</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># ä¸Šä¼ åˆ°è…¾è®¯COSå­˜å‚¨æ¡¶</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup Python</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/setup-python@v4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>python-version</span><span class=p>:</span><span class=w> </span><span class=m>3.9</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup coscmd and sdk</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>sudo pip install coscmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Configure coscmd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>SECRET_ID</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.SecretId }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>SECRET_KEY</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.SecretKey }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>BUCKET</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.Bucket }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>REGION</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.Region }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>coscmd config -a $SECRET_ID -s $SECRET_KEY -b $BUCKET -r $REGION</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Upload to COS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>coscmd upload -rfs --delete public/ /</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># åˆ·æ–°è…¾è®¯CDNç¼“å­˜ç›®å½•</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Flush CDN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>SECRET_ID</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.SecretId }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>SECRET_KEY</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.SecretKey }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          pip install --upgrade tencentcloud-sdk-python
</span></span></span><span class=line><span class=cl><span class=sd>          python flush-dns.py -i $SECRET_ID -k $SECRET_KEY</span><span class=w>          
</span></span></span></code></pre></div><ol start=2><li>åœ¨ Github ä»“åº“æ ¹ç›®å½•ï¼Œæ–°å»º flush-dns.py æ–‡ä»¶ï¼Œå¤åˆ¶ä»¥ä¸‹ä»£ç åˆ°æ–‡ä»¶é‡Œï¼Œå¹¶å°†é‡Œé¢çš„"koobai.com"åŸŸåä¿®æ”¹æˆè‡ªå·±çš„ CDN åŠ é€ŸåŸŸåã€‚ä½œç”¨ï¼šé€šè¿‡ Python è„šæœ¬å®ç°åˆ·æ–° CDN ç¼“å­˜ï¼Œè¯¦ç»†å‚æ•°å¯å‚è€ƒ<a href="https://console.cloud.tencent.com/api/explorer?Product=cdn&Version=2018-06-06&Action=PurgePathCache" target=_blank>è…¾è®¯çš„è°ƒç”¨ aip æ–‡æ¡£</a>ã€‚</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>argparse</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>tencentcloud.common</span> <span class=kn>import</span> <span class=n>credential</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>tencentcloud.common.profile.client_profile</span> <span class=kn>import</span> <span class=n>ClientProfile</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>tencentcloud.common.profile.http_profile</span> <span class=kn>import</span> <span class=n>HttpProfile</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>tencentcloud.common.exception.tencent_cloud_sdk_exception</span> <span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>TencentCloudSDKException</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>tencentcloud.cdn.v20180606</span> <span class=kn>import</span> <span class=n>cdn_client</span><span class=p>,</span> <span class=n>models</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä¼ å…¥å‚æ•°</span>
</span></span><span class=line><span class=cl><span class=n>parser</span> <span class=o>=</span> <span class=n>argparse</span><span class=o>.</span><span class=n>ArgumentParser</span><span class=p>(</span><span class=n>description</span><span class=o>=</span><span class=s1>&#39;-i &lt;secretId&gt; -k &lt;secretKey&gt;&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>parser</span><span class=o>.</span><span class=n>add_argument</span><span class=p>(</span><span class=s1>&#39;-i&#39;</span><span class=p>,</span> <span class=s1>&#39;--secretid&#39;</span><span class=p>,</span> <span class=nb>type</span><span class=o>=</span><span class=nb>str</span><span class=p>,</span> <span class=n>required</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>help</span><span class=o>=</span><span class=s1>&#39;secretId&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>parser</span><span class=o>.</span><span class=n>add_argument</span><span class=p>(</span><span class=s1>&#39;-k&#39;</span><span class=p>,</span> <span class=s1>&#39;--secretkey&#39;</span><span class=p>,</span> <span class=nb>type</span><span class=o>=</span><span class=nb>str</span><span class=p>,</span> <span class=n>required</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>help</span><span class=o>=</span><span class=s1>&#39;secretKey&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>args</span> <span class=o>=</span> <span class=n>parser</span><span class=o>.</span><span class=n>parse_args</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>cred</span> <span class=o>=</span> <span class=n>credential</span><span class=o>.</span><span class=n>Credential</span><span class=p>(</span><span class=n>args</span><span class=o>.</span><span class=n>secretid</span><span class=p>,</span><span class=n>args</span><span class=o>.</span><span class=n>secretkey</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>httpProfile</span> <span class=o>=</span> <span class=n>HttpProfile</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>httpProfile</span><span class=o>.</span><span class=n>endpoint</span> <span class=o>=</span> <span class=s2>&#34;cdn.tencentcloudapi.com&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>clientProfile</span> <span class=o>=</span> <span class=n>ClientProfile</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>clientProfile</span><span class=o>.</span><span class=n>httpProfile</span> <span class=o>=</span> <span class=n>httpProfile</span>
</span></span><span class=line><span class=cl>    <span class=n>client</span> <span class=o>=</span> <span class=n>cdn_client</span><span class=o>.</span><span class=n>CdnClient</span><span class=p>(</span><span class=n>cred</span><span class=p>,</span> <span class=s2>&#34;&#34;</span><span class=p>,</span> <span class=n>clientProfile</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>req</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>PurgePathCacheRequest</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>params</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;Paths&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;https://koobai.com/&#34;</span><span class=p>,</span> <span class=s2>&#34;https://www.koobai.com/&#34;</span><span class=p>],</span> <span class=s2>&#34;FlushType&#34;</span><span class=p>:</span> <span class=s2>&#34;flush&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>req</span><span class=o>.</span><span class=n>from_json_string</span><span class=p>(</span><span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>params</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>resp</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>PurgePathCache</span><span class=p>(</span><span class=n>req</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>resp</span><span class=o>.</span><span class=n>to_json_string</span><span class=p>())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>except</span> <span class=n>TencentCloudSDKException</span> <span class=k>as</span> <span class=n>err</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>err</span><span class=p>)</span>
</span></span></code></pre></div><p>è‡ªæ­¤éƒ¨ç½²å®Œæ¯•ï¼Œå½“æœ‰æ–°æ–‡ä»¶ä¸Šä¼ åˆ° main åˆ†æ”¯ï¼Œå°±ä¼šè‡ªåŠ¨è§¦å‘ï¼ˆhugo ç”Ÿæˆé™æ€æ–‡ä»¶â€”â€”ä¸Šä¼ åˆ° COSâ€”â€”åˆ·æ–° CDN ç¼“å­˜ï¼‰ã€‚</p><h3 id=æŸ¥çœ‹æ˜¯å¦éƒ¨ç½²æˆåŠŸ>æŸ¥çœ‹æ˜¯å¦éƒ¨ç½²æˆåŠŸï¼š</h3><ol><li>Github ä»“åº“ Actions ä¸‹ï¼ŒæŸ¥çœ‹æ„å»ºè®°å½•</li><li>COS å­˜å‚¨æ¡¶ä¸‹çš„æ–‡ä»¶å˜åŠ¨</li><li>CDN åˆ·æ–°é¢„çƒ­ä¸‹ï¼Œæ“ä½œè®°å½•â€”â€”ç›®å½•åˆ·æ–°</li></ol><h3 id=è´¹ç”¨>è´¹ç”¨ï¼š</h3><p>COSã€CDN è´¹ç”¨(åŒ…å«å­˜å‚¨+CDN å›æºæµé‡+CDN æµé‡+HTTPS è¯·æ±‚ç­‰)ï¼Œä¸ªäººç«™æ²¡ä»€ä¹ˆæµé‡ï¼Œåº”è¯¥å¾ˆä½ï¼Œè·‘ä¸€æ®µæ—¶é—´çœ‹çœ‹ã€‚å¦å¤–è…¾è®¯äº‘ä¹Ÿæä¾›äº†å…­ä¸ªæœˆä¸€éƒ¨åˆ†å…è´¹è¯•ç”¨~~</p><h3 id=æ‰©å±•>æ‰©å±•ï¼š</h3><p>å› ä¸ºåšå®¢æºæ–‡ä»¶åœ¨ Github é‡Œï¼Œå¯ä»¥åˆ©ç”¨ vercel å¹³å°è¯»å–ä»“åº“ä¹Ÿè‡ªåŠ¨æ„å»ºä¸€ä¸ªã€‚å¦‚æœä½¿ç”¨çš„æ˜¯é˜¿é‡Œäº‘åŸŸå DNS æœåŠ¡å™¨ï¼Œå¯ä»¥åœ¨è§£æè¯·æ±‚æ¥æºé€‰æ‹©"å¢ƒå¤–"ï¼Œ&ldquo;è®°å½•å€¼"å¡«å†™ vercel å¹³å°ç»‘å®šåŸŸåæ—¶æ‰€æä¾›çš„ã€‚</p><p>è¿™æ ·å›½å†…ç½‘ç»œè®¿é—®çš„æ—¶å€™èµ°è…¾è®¯ CDNï¼Œå›½å¤–è®¿é—®çš„æ—¶å€™èµ° vercel å¹³å°æ‰€æä¾›çš„èŠ‚ç‚¹ã€‚</p></div><div class=single-biaoq><div class=page-time><script>document.write(formatDate(1673740800))</script></div><div class=single-tag><div class=single-tag-c><a href=/tags/%E5%8D%9A%E5%AE%A2/>åšå®¢</a></div><div class=single-tag-c><a href=/tags/%E6%8A%98%E8%85%BE/>æŠ˜è…¾</a></div><div class=single-tag-c><a href=/tags/hugo/>Hugo</a></div></div><div class=single-like><emoji-reaction class=reactions reacttargetid=hugo_action_tencentcos theme=system endpoint=https://like.yangle.vip availablearraystring=ğŸ‘,thumbs-up;ğŸ‰,party-popper;ğŸ˜„,smile-face;ğŸ˜,cool;></emoji-reaction></div></div></div><div class=archives_nrong><div class=archives_one><div><div class=archive-title><a href=/time/>åå¹´å¼¹æŒ‡ä¸€æŒ¥é—´</a></div><div class=archive-time><script>document.write(formatDate(1673049600))</script></div></div><div class=archive-img><a href=/time/><img loading=lazy decoding=async src=https://img.koobai.com/article/noy.webp></a></div></div><div class=archives_one><div><div class=archive-title><a href=/hugo_dark/>Hugoä¸»é¢˜æ·»åŠ æš—é»‘(å¤œé—´)æ¨¡å¼, å¹¶è‡ªåŠ¨åˆ‡æ¢</a></div><div class=archive-time><script>document.write(formatDate(1674086400))</script></div></div><div class=archive-img><a href=/hugo_dark/><img loading=lazy decoding=async src=https://img.koobai.com/article/dark.svg></a></div></div></div><div class=article-comments><link href=https://npm.elemecdn.com/artalk@2.5.5/dist/ArtalkLite.css rel=stylesheet><script src=https://npm.elemecdn.com/artalk@2.5.5/dist/ArtalkLite.js></script><div id=Comments></div><script>new Artalk({el:"#Comments",pageKey:"https://koobai.com/hugo_action_tencentcos/",pageTitle:"Githubè‡ªåŠ¨æ„å»ºHugo, å¹¶åŒæ­¥åˆ°è…¾è®¯COS, åŒæ—¶åˆ·æ–°CDNç¼“å­˜",server:"https://c.koobai.com",site:"Koobai ç©ºç™½ç”Ÿæ´»"})</script></div></div><div class=footer-background><div class=footer><div class=footer-info>&copy; 2023 <a href=/>ç©ºç™½Koobai</a>.
ç”± <a href=https://gohugo.io/ target=_blank>Hugo</a> æä¾›å¼ºåŠ›é©±åŠ¨,<span class=youpaiyun><a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target=_blank>åˆæ‹äº‘</a>æä¾›å›¾ç‰‡å­˜å‚¨/åŠ é€Ÿ</span>.
<a href=https://beian.miit.gov.cn/ target=_blank>æµ™ICPå¤‡16011784å·-1</a> <a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33011302000343">æµ™å…¬ç½‘å®‰å¤‡ 33011302000343 å·</a></div><div class=githuab><a href=https://github.com/koobai/blog target=_blank data-umami-event=Github><svg aria-hidden="true" viewBox="0 0 16 16" data-view-component="true" class="octicon octicon-mark-github v-align-middle color-fg-default"><path d="M8 0c4.42.0 8 3.58 8 8a8.013 8.013.0 01-5.45 7.59c-.4.08-.55-.17-.55-.38.0-.27.01-1.13.01-2.2.0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95.0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12.0.0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27s-1.36.09-2 .27c-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15.0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94.0.67.01 1.3.01 1.49.0.21-.15.45-.55.38A7.995 7.995.0 010 8c0-4.42 3.58-8 8-8z"/></svg></a></div></div><script src=/js/view-image.min.js></script>
<script type=module src=https://cdn.jsdelivr.net/gh/emaction/frontend.dist@1.0.8/bundle.js></script>
<script async src=https://u.koobai.com/yangle.js data-website-id=dd7da057-fabf-4362-b9fb-4f547063bd87 data-domains=koobai.com></script><div class=gotop_hide><div class=gotop onclick=smoothScrollTop() id=gotop><img src=https://img.koobai.com/up.svg alt=å›åˆ°é¡¶éƒ¨></div></div><script>window.addEventListener("load",function(){document.body.classList.add("loaded")})</script><script type=text/javascript src=/js/bundle.min.ec26b59a00a2590684251feed454cb3affa248a483c1f9e342d419d474ef6451.js></script></body></html>